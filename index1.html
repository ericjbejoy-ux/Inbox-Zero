<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Inbox Zero - Cyberpunk Neon Dashboard ðŸš€</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&family=Roboto+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --bg-primary: #020111;
  --bg-gradient: linear-gradient(135deg, #020111 0%, #0a0a0f 30%, #1a1626 100%);
  --card-bg: rgba(26, 28, 42, 0.7);
  --glass-primary: rgba(255, 255, 255, 0.08);
  --glass-secondary: rgba(255, 255, 255, 0.04);
  --neon-cyan: #00f5ff;
  --neon-magenta: #ff00ff;
  --neon-lime: #39ff14;
  --neon-orange: #ff9500;
  --neon-purple: #8a2be2;
  --priority-red: #ff4757;
  --text-primary: #ffffff;
  --text-glow: #e0e0e0;
  --text-secondary: #b8b8b8;
  --text-muted: #666;
  --shadow-cyan: 0 0 30px rgba(0, 245, 255, 0.4);
  --shadow-magenta: 0 0 30px rgba(255, 0, 255, 0.4);
  --shadow-lime: 0 0 30px rgba(57, 255, 20, 0.4);
  --glow-pulse: 0 0 5px rgba(0, 245, 255, 0.6);
}

*::selection {
  background: var(--neon-cyan);
  color: var(--bg-primary);
}

body {
  font-family: 'Rajdhani', sans-serif;
  background: var(--bg-gradient);
  color: var(--text-primary);
  min-height: 100vh;
  overflow-x: hidden;
  position: relative;
}

.matrix-bg {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -2;
  opacity: 0.1;
}

.matrix-bg canvas {
  display: block;
}

.welcome-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  background: var(--bg-gradient);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  transition: all 1s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.welcome-screen.fade-out {
  opacity: 0;
  transform: scale(0.95);
}

.logo {
  font-family: 'Orbitron', monospace;
  font-size: clamp(3rem, 8vw, 6rem);
  font-weight: 900;
  background: linear-gradient(45deg, var(--neon-cyan), var(--neon-magenta), var(--neon-lime), var(--neon-orange));
  background-size: 400% 400%;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: gradientShift 4s ease infinite, neonFlicker 3s infinite;
  text-shadow: var(--shadow-cyan), var(--shadow-magenta);
  margin-bottom: 1rem;
  letter-spacing: 0.1em;
}

@keyframes gradientShift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

@keyframes neonFlicker {
  0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% { 
    text-shadow: var(--shadow-cyan), var(--shadow-magenta);
  }
  20%, 24%, 55% { 
    text-shadow: none;
  }
}

.welcome-title {
  font-size: clamp(1.5rem, 4vw, 2.5rem);
  font-weight: 600;
  color: var(--text-glow);
  margin-bottom: 2rem;
  text-align: center;
  animation: pulseGlow 2s ease-in-out infinite;
}

@keyframes pulseGlow {
  0%, 100% { text-shadow: 0 0 20px var(--neon-cyan); }
  50% { text-shadow: 0 0 40px var(--neon-cyan), 0 0 60px var(--neon-magenta); }
}

.file-upload-zone {
  background: var(--glass-primary);
  backdrop-filter: blur(25px);
  border: 2px dashed var(--neon-cyan);
  border-radius: 24px;
  padding: 3rem 4rem;
  text-align: center;
  cursor: pointer;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: var(--shadow-cyan);
  position: relative;
  overflow: hidden;
}

.file-upload-zone::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(45deg, transparent 30%, rgba(0,245,255,0.1) 50%, transparent 70%);
  transform: rotate(45deg);
  transition: all 0.6s;
  opacity: 0;
}

.file-upload-zone:hover {
  border-color: var(--neon-lime);
  background: rgba(0,245,255,0.12);
  box-shadow: var(--shadow-lime);
  transform: translateY(-8px);
}

.file-upload-zone:hover::before {
  opacity: 1;
  animation: shine 1.5s infinite;
}

@keyframes shine {
  0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
  100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
}

.upload-icon {
  font-size: 4rem;
  background: linear-gradient(45deg, var(--neon-cyan), var(--neon-magenta));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 1.5rem;
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-10px); }
  60% { transform: translateY(-5px); }
}

.upload-text {
  font-size: 1.3rem;
  font-weight: 500;
  margin-bottom: 0.5rem;
}

.upload-subtext {
  color: var(--text-secondary);
  font-size: 1rem;
  font-family: 'Roboto Mono', monospace;
}

.dashboard {
  display: none;
  min-height: 100vh;
}

.dashboard.active {
  display: block;
}

.sidebar {
  width: 280px;
  background: var(--glass-primary);
  backdrop-filter: blur(30px);
  border-right: 2px solid transparent;
  display: flex;
  flex-direction: column;
  padding: 2.5rem 0;
  position: fixed;
  height: 100vh;
  z-index: 100;
  box-shadow: var(--shadow-magenta);
}

.sidebar h2 {
  text-align: center;
  font-family: 'Orbitron', sans-serif;
  font-size: 1.6rem;
  font-weight: 700;
  background: linear-gradient(135deg, var(--neon-cyan), var(--neon-magenta));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 3rem;
  letter-spacing: 2px;
}

.sidebar button {
  background: transparent;
  border: none;
  color: var(--text-secondary);
  padding: 1.4rem 2.5rem;
  text-align: left;
  cursor: pointer;
  transition: all 0.4s ease;
  font-size: 1.1rem;
  font-weight: 500;
  font-family: 'Rajdhani', sans-serif;
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
  gap: 1.2rem;
  margin: 0 1.5rem;
  border-radius: 16px;
}

.sidebar button::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  width: 0;
  height: 100%;
  background: linear-gradient(90deg, var(--neon-cyan), var(--neon-lime));
  transition: width 0.4s ease;
  z-index: -1;
}

.sidebar button i {
  width: 24px;
  font-size: 1.2rem;
  transition: transform 0.3s ease;
}

.sidebar button:hover,
.sidebar button.active {
  color: var(--text-primary);
  transform: translateX(8px);
}

.sidebar button:hover i,
.sidebar button.active i {
  transform: scale(1.2);
}

.sidebar button.active::before,
.sidebar button:hover::before {
  width: 100%;
}

.main-content {
  margin-left: 280px;
  padding: 4rem 3rem;
  overflow-y: auto;
  height: 100vh;
}

.section-title {
  font-family: 'Orbitron', sans-serif;
  font-size: clamp(2rem, 5vw, 3rem);
  background: linear-gradient(135deg, var(--neon-lime), var(--neon-orange));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 2rem;
  letter-spacing: 1px;
  animation: titleGlow 3s ease-in-out infinite alternate;
}

@keyframes titleGlow {
  from { filter: drop-shadow(0 0 10px var(--neon-lime)); }
  to { filter: drop-shadow(0 0 20px var(--neon-orange)); }
}

.priority-card {
  border: 2px solid var(--priority-red) !important;
  box-shadow: 0 0 25px rgba(255, 71, 87, 0.4) !important;
}

.priority-card:hover {
  box-shadow: 
    0 30px 60px rgba(0,0,0,0.6),
    0 0 40px var(--priority-red),
    inset 0 0 25px rgba(255, 71, 87, 0.2) !important;
}

.cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
  gap: 2rem;
}

.priority-vertical {
  display: flex;
  flex-direction: column;
  gap: 2rem;
  max-width: 450px;
}

.task-card {
  background: var(--glass-secondary);
  backdrop-filter: blur(30px);
  border-radius: 24px;
  padding: 2rem;
  cursor: pointer;
  transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
  border: 1px solid rgba(0,245,255,0.2);
  position: relative;
  overflow: hidden;
}

.task-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -150%;
  width: 150%;
  height: 100%;
  background: linear-gradient(90deg, 
    transparent, 
    rgba(0,245,255,0.15), 
    rgba(255,0,255,0.15),
    transparent
  );
  transition: left 0.8s;
}

.task-card:hover::before {
  left: 150%;
}

.task-card:hover {
  transform: translateY(-15px) rotateX(5deg) scale(1.03);
  border-color: var(--neon-cyan);
  box-shadow: 
    0 35px 70px rgba(0,0,0,0.7),
    var(--shadow-cyan),
    var(--shadow-magenta);
}

.task-header {
  display: flex;
  align-items: flex-start;
  gap: 1.2rem;
  margin-bottom: 1.2rem;
}

.task-checkbox {
  width: 26px;
  height: 26px;
  accent-color: var(--neon-lime);
  cursor: pointer;
  margin-top: 3px;
  filter: drop-shadow(0 0 8px var(--neon-lime));
  transform: scale(1);
  transition: transform 0.3s ease;
}

.task-checkbox:hover {
  transform: scale(1.2);
}

.task-title {
  font-size: 1.4rem;
  font-weight: 600;
  color: var(--text-primary);
  flex: 1;
  line-height: 1.3;
}

.task-title.checked {
  text-decoration: line-through;
  color: var(--text-muted);
  opacity: 0.7;
}

.task-details {
  display: none;
  color: var(--text-secondary);
  font-size: 0.95rem;
  line-height: 1.6;
  font-family: 'Roboto Mono', monospace;
  max-height: 0;
  overflow: hidden;
  transition: all 0.5s ease;
}

.task-details p {
  margin-bottom: 0.8rem;
  padding-left: 1rem;
  position: relative;
}

.task-details p::before {
  content: 'â–¸';
  position: absolute;
  left: 0;
  color: var(--neon-cyan);
  font-weight: bold;
}

.task-details strong {
  color: var(--neon-lime);
  font-weight: 500;
}

.task-card.expanded .task-details {
  display: block;
  max-height: 300px;
  animation: expandDetails 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  padding-top: 1rem;
}

@keyframes expandDetails {
  0% { opacity: 0; max-height: 0; }
  100% { opacity: 1; max-height: 300px; }
}

.empty-state {
  text-align: center;
  padding: 6rem 3rem;
  color: var(--text-muted);
}

.empty-state i {
  font-size: 5rem;
  color: var(--neon-purple);
  margin-bottom: 2rem;
  opacity: 0.6;
}

.empty-state h3 {
  font-size: 1.8rem;
  margin-bottom: 1rem;
  color: var(--text-secondary);
}

.category-section {
  margin-bottom: 4rem;
}

.category-section h3 {
  font-family: 'Orbitron', sans-serif;
  font-size: 1.8rem;
  background: linear-gradient(135deg, var(--neon-magenta), var(--neon-purple));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 1.5rem;
  letter-spacing: 1px;
}

@media (max-width: 1024px) {
  .sidebar { width: 250px; }
  .main-content { margin-left: 250px; padding: 3rem 2rem; }
  .cards-grid { grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); }
}

@media (max-width: 768px) {
  .sidebar {
    transform: translateX(-100%);
    transition: transform 0.4s ease;
  }
  .sidebar.open { transform: translateX(0); }
  .main-content { margin-left: 0; padding: 2rem 1.5rem; }
  .cards-grid { grid-template-columns: 1fr; }
}

::-webkit-scrollbar {
  width: 10px;
}
::-webkit-scrollbar-track {
  background: rgba(2,1,17,0.5);
}
::-webkit-scrollbar-thumb {
  background: linear-gradient(var(--neon-cyan), var(--neon-magenta));
  border-radius: 5px;
}
::-webkit-scrollbar-thumb:hover {
  box-shadow: var(--glow-pulse);
}
</style>
</head>
<body>
<div class="matrix-bg">
  <canvas id="matrixCanvas"></canvas>
</div>

<div class="welcome-screen" id="welcomeScreen">
  <div class="logo">INBOX ZERO</div>
  <h1 class="welcome-title">ðŸš€ Welcome to Cyberpunk Task Management</h1>
  <div class="file-upload-zone" onclick="document.getElementById('csvFile').click()">
    <i class="fas fa-cloud-upload-alt upload-icon"></i>
    <div class="upload-text">Choose CSV File</div>
    <div class="upload-subtext">ðŸ“§ Load your emails and organize tasks automatically</div>
    <input type="file" id="csvFile" accept=".csv" style="display: none;">
  </div>
</div>

<div class="dashboard" id="dashboard">
  <div class="sidebar" id="sidebar">
    <h2><i class="fas fa-terminal"></i> NAV</h2>
    <button class="active" onclick="showSection('Priority', this)" data-section="Priority">
      <i class="fas fa-bolt"></i> Priority
    </button>
    <button onclick="showSection('Deadlines', this)" data-section="Deadlines">
      <i class="fas fa-clock"></i> Deadlines
    </button>
    <button onclick="showSection('Checklist', this)" data-section="Checklist">
      <i class="fas fa-list-check"></i> Checklist
    </button>
    <button onclick="showSection('Category', this)" data-section="Category">
      <i class="fas fa-layer-group"></i> Category
    </button>
  </div>

  <div class="main-content" id="mainContent">
  </div>
</div>

<script>
let tasks = [];
let categorized = { Priority: [], Deadlines: [], Checklist: [], Category: {} };
const categoryMap = ["Assignments", "Exams", "Assessments and Quizzes", "Events", "Internships and Job Opportunities", "Workshops", "Achievements"];

function initMatrix() {
  const canvas = document.getElementById('matrixCanvas');
  const ctx = canvas.getContext('2d');
  
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  
  const chars = '01ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«ã‚­ã‚¯ã‚±ã‚³ã‚µã‚·ã‚¹ã‚»ã‚½ã‚¿ãƒãƒ„ãƒ†ãƒˆãƒŠãƒ‹ãƒŒãƒãƒŽãƒãƒ’ãƒ•ãƒ˜ãƒ›ãƒžãƒŸãƒ ãƒ¡ãƒ¢ãƒ¤ãƒ¦ãƒ¨ãƒ©ãƒªãƒ«ãƒ¬ãƒ­ãƒ¯ãƒ²ãƒ³';
  const fontSize = 14;
  const columns = canvas.width / fontSize;
  const drops = Array(Math.floor(columns)).fill(1);
  
  function draw() {
    ctx.fillStyle = 'rgba(2, 1, 17, 0.05)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    ctx.fillStyle = '#00f5ff';
    ctx.font = `${fontSize}px monospace`;
    
    drops.forEach((y, i) => {
      const text = chars[Math.floor(Math.random() * chars.length)];
      ctx.fillText(text, i * fontSize, y * fontSize);
      
      if (y * fontSize > canvas.height && Math.random() > 0.975) {
        drops[i] = 0;
      }
      drops[i]++;
    });
  }
  
  setInterval(draw, 50);
}

document.addEventListener('DOMContentLoaded', function() {
  initMatrix();
  
  const csvFile = document.getElementById('csvFile');
  csvFile.addEventListener('change', handleFileUpload);
  
  window.addEventListener('resize', () => {
    const canvas = document.getElementById('matrixCanvas');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  });
});

function handleFileUpload(event) {
  const file = event.target.files[0];
  if (file) {
    Papa.parse(file, {
      header: true,
      skipEmptyLines: true,
      complete: function(results) {
        tasks = results.data;
        categorizeTasks();
        transitionToDashboard();
      }
    });
  }
}

function transitionToDashboard() {
  const welcomeScreen = document.getElementById('welcomeScreen');
  const dashboard = document.getElementById('dashboard');
  
  welcomeScreen.classList.add('fade-out');
  
  setTimeout(() => {
    welcomeScreen.style.display = 'none';
    dashboard.classList.add('active');
    showSection('Priority', document.querySelector('.sidebar button.active'));
  }, 1000);
}

function categorizeTasks() {
  categorized = { Priority: [], Deadlines: [], Checklist: [], Category: {} };
  categoryMap.forEach(cat => categorized.Category[cat] = []);

  tasks.forEach(task => {
    const subject = (task.Subject || '').toLowerCase();
    const content = (task.Content || '').toLowerCase();

    if (subject.includes('assignment') || subject.includes('project') || subject.includes('lab') || subject.includes('quiz')) {
      categorized.Priority.push(task);
    }

    if (subject.includes('submission') || content.includes('by') || subject.includes('due')) {
      categorized.Deadlines.push(task);
    }

    if (subject.includes('event') || subject.includes('workshop') || subject.includes('internship')) {
      categorized.Checklist.push(task);
    }

    if (subject.includes('assignment')) categorized.Category['Assignments'].push(task);
    else if (subject.includes('exam')) categorized.Category['Exams'].push(task);
    else if (subject.includes('quiz') || subject.includes('assessment')) categorized.Category['Assessments and Quizzes'].push(task);
    else if (subject.includes('event')) categorized.Category['Events'].push(task);
    else if (subject.includes('internship') || subject.includes('job')) categorized.Category['Internships and Job Opportunities'].push(task);
    else if (subject.includes('workshop')) categorized.Category['Workshops'].push(task);
    else if (subject.includes('achievement') || subject.includes('won')) categorized.Category['Achievements'].push(task);
    else categorized.Category['Assignments'].push(task);
  });
}

function showSection(sectionName, button) {
  document.querySelectorAll('.sidebar button').forEach(btn => btn.classList.remove('active'));
  button.classList.add('active');

  const mainContent = document.getElementById('mainContent');
  let html = '';

  if (sectionName === 'Category') {
    html = '';
    Object.keys(categorized.Category).forEach(cat => {
      const tasks = categorized.Category[cat];
      if (tasks.length > 0) {
        html += `
          <div class="category-section">
            <h3><i class="fas fa-tag"></i> ${cat}</h3>
            <div class="cards-grid">`;
        tasks.forEach(task => {
          html += renderCard(task, false);
        });
        html += `</div></div>`;
      }
    });
    if (html === '') {
      html = getEmptyState('No categorized tasks yet', 'fas fa-tags');
    }
  } else if (sectionName === 'Priority') {
    const tasks = categorized.Priority;
    html = `<h1 class="section-title"><i class="fas fa-bolt"></i> Priority Tasks âš¡</h1>`;
    if (tasks.length > 0) {
      html += `<div class="priority-vertical">`;
      tasks.forEach(task => {
        html += renderCard(task, false, 'priority-card');
      });
      html += `</div>`;
    } else {
      html += getEmptyState('No priority tasks assigned', 'fas fa-bolt');
    }
  } else {
    const tasks = categorized[sectionName];
    const icons = { Deadlines: 'fas fa-clock', Checklist: 'fas fa-list-check' };
    html = `<h1 class="section-title"><i class="${icons[sectionName] || 'fas fa-list'}"></i> ${sectionName}</h1>`;
    if (tasks.length > 0) {
      html += `<div class="cards-grid">`;
      tasks.forEach(task => {
        html += renderCard(task, sectionName === 'Checklist');
      });
      html += `</div>`;
    } else {
      html += getEmptyState(`No ${sectionName.toLowerCase()} found`, icons[sectionName] || 'fas fa-question');
    }
  }

  mainContent.innerHTML = html;
}

function renderCard(task, isChecklist, extraClass = '') {
  const safeSubject = task.Subject || 'Untitled Task';
  const safeContent = task.Content || 'No details provided';
  const safeName = task.Name || 'Unknown Sender';
  const safeEmail = task.Email || 'No email address';
  
  return `
    <div class="task-card ${extraClass}" onclick="toggleExpand(event, this)">
      ${isChecklist ? '<input type="checkbox" class="task-checkbox" onchange="updateCheck(this)">' : ''}
      <div class="task-header">
        <span class="task-title">${safeSubject}</span>
      </div>
      <div class="task-details">
        <p><strong><i class="fas fa-user-circle"></i> From:</strong> ${safeName} &lt;${safeEmail}&gt;</p>
        <p><strong><i class="fas fa-align-left"></i> Content:</strong> ${safeContent}</p>
      </div>
    </div>
  `;
}

function getEmptyState(message, icon) {
  return `
    <div class="empty-state">
      <i class="${icon}"></i>
      <h3>${message}</h3>
      <p>Upload your CSV file to get started ðŸš€</p>
    </div>
  `;
}

function toggleExpand(event, card) {
  event.stopPropagation();
  card.classList.toggle('expanded');
}

function updateCheck(checkbox) {
  const title = checkbox.parentElement.querySelector('.task-title');
  if (checkbox.checked) {
    title.classList.add('checked');
  } else {
    title.classList.remove('checked');
  }
}
</script>

</body>
</html>
